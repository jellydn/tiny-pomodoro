# Ralph Progress Log
Started: Wed Jan 14 13:39:11 +08 2026
---

## Codebase Patterns
- Use Expo as the React Native framework (recommended approach)
- Use `npx create-expo-app@latest <name> --template blank-typescript` for TypeScript projects
- Typecheck: `npx tsc --noEmit` in PomodoroTimer directory
- Run web dev: `npm run web` in PomodoroTimer directory (requires react-dom and react-native-web)
- Context pattern: create contexts in `contexts/` directory, export Provider and useX hook together
- Component pattern: create reusable components in `components/` directory
- Settings persistence: use AsyncStorage with JSON.stringify/parse for settings objects
- Screen navigation: use `useState<Screen>` for simple navigation without a navigation library

---

## Wed Jan 14 2026 - US-001
Thread: https://ampcode.com/threads/T-019bbb03-ea4c-727c-a209-dd1d91c1396c
- Initialized React Native project with Expo + TypeScript template
- Added @react-native-async-storage/async-storage for local storage
- Added react-native-svg for circular progress indicator
- Typecheck passes successfully
- Files changed: Created PomodoroTimer/ directory with full Expo project
- **Learnings for future iterations:**
  - React Native CLI init is deprecated; use Expo's create-expo-app instead
  - The `blank-typescript` template provides TypeScript support out of the box
  - AsyncStorage and react-native-svg install cleanly with npm
---

## Wed Jan 14 2026 - US-002
Thread: https://ampcode.com/threads/T-019bbb06-4ed7-779d-97ea-bf56c82ed79b
- Created TimerContext with state: duration, remaining, isRunning, isPaused
- Implemented setDuration, start, pause, stop, reset actions
- Timer decrements remaining time every second using setInterval
- Typecheck passes
- Files changed: 
  - Created PomodoroTimer/contexts/TimerContext.tsx
  - Updated PomodoroTimer/App.tsx to use TimerProvider
- **Learnings for future iterations:**
  - Use useRef to store interval ID for proper cleanup
  - Context pattern: export both Provider component and useTimer hook
  - Clear interval when component unmounts or timer state changes
---

## Wed Jan 14 2026 - US-003
Thread: https://ampcode.com/threads/T-019bbb08-34be-7429-a3d9-a6898c221509
- Created PresetButtons component with 4 preset durations (25, 30, 45, 50 minutes)
- Selected preset is visually highlighted with blue background (#007AFF)
- Tapping a preset updates timer display immediately via setDuration
- Default selection is 25 minutes (matches DEFAULT_DURATION in TimerContext)
- Disabled preset buttons while timer is running
- Typecheck passes
- Files changed:
  - Created PomodoroTimer/components/PresetButtons.tsx
  - Updated PomodoroTimer/App.tsx to include PresetButtons and extracted MainScreen component
- **Learnings for future iterations:**
  - Components go in `components/` directory
  - Web dev requires additional deps: react-dom and react-native-web (install with `npx expo install`)
  - Use TouchableOpacity for interactive buttons in React Native
  - Disable preset buttons while timer is running to prevent mid-session changes
---

## Wed Jan 14 2026 - US-004
Thread: https://ampcode.com/threads/T-019bbb0b-1c5d-72fa-82e4-4d2c73883018
- Created CircularProgress component using react-native-svg
- Progress depletes clockwise as timer runs (using strokeDashoffset)
- Digital time display in MM:SS format centered in the circle
- Replaced simple TimerDisplay with CircularProgress in App.tsx
- Typecheck passes
- Files changed:
  - Created PomodoroTimer/components/CircularProgress.tsx
  - Updated PomodoroTimer/App.tsx
- **Learnings for future iterations:**
  - Use SVG Circle with strokeDasharray/strokeDashoffset for progress rings
  - Rotation of -90 degrees starts progress from top (12 o'clock position)
  - Calculate circumference as 2 * PI * radius for strokeDasharray
---

## Wed Jan 14 2026 - US-005
Thread: https://ampcode.com/threads/T-019bbb14-90de-7659-9cac-08c3e98028bf
- Created TimerControls component with Start/Pause toggle and Stop button
- Start/Pause is a single button that changes label based on timer state (Start → Pause → Resume)
- Stop button resets timer to selected duration
- Browser verified: all controls work correctly
- Typecheck passes
- Files changed:
  - Created PomodoroTimer/components/TimerControls.tsx
  - Updated PomodoroTimer/App.tsx to include TimerControls
- **Learnings for future iterations:**
  - Use isRunning and isPaused from TimerContext to determine button label
  - isPaused state distinguishes between "not started" (Start) and "paused" (Resume)
---

## Wed Jan 14 2026 - US-006
Thread: https://ampcode.com/threads/T-019bbb16-a326-726a-b05c-60e9da1d5b4d
- Created SettingsContext with soundEnabled/vibrationEnabled state + AsyncStorage persistence
- Created SettingsScreen component with toggle switches for Sound and Vibration
- Created SettingsButton (gear icon) for navigation from main screen
- Updated App.tsx with simple state-based screen navigation
- Logic prevents both toggles from being OFF (at least one must be enabled)
- Settings load from AsyncStorage on app start
- Typecheck passes
- Files changed:
  - Created PomodoroTimer/contexts/SettingsContext.tsx
  - Created PomodoroTimer/components/SettingsScreen.tsx
  - Created PomodoroTimer/components/SettingsButton.tsx
  - Updated PomodoroTimer/App.tsx
- **Learnings for future iterations:**
  - Simple screen navigation can be done with useState<Screen> without a navigation library
  - Use Switch component from react-native for toggle switches
  - Disable a toggle switch when toggling it would violate a constraint (e.g., both OFF)
---
